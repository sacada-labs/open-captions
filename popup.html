<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Open Captions</title>
    <link rel="stylesheet" href="popup.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app">
      <!-- Header -->
      <header class="header">
        <div class="logo">
          <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="4" width="20" height="16" rx="2" stroke="currentColor" stroke-width="2"/>
            <path d="M6 15H18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M6 11H14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span class="logo-text">Open Captions</span>
        </div>
        <div class="connection-status" id="connectionStatus">
          <span class="status-dot"></span>
          <span class="status-text">Detecting...</span>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main">
        <!-- Subtitle Upload Section -->
        <section class="section upload-section">
          <div class="section-header">
            <h2 class="section-title">
              <svg class="section-icon" viewBox="0 0 24 24" fill="none">
                <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 18V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 15L12 12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Subtitle File
            </h2>
          </div>
          
          <div class="dropzone" id="dropzone">
            <input type="file" id="fileInput" accept=".srt,.vtt,.sub,.ass" hidden />
            <div class="dropzone-content">
              <svg class="dropzone-icon" viewBox="0 0 24 24" fill="none">
                <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M17 8L12 3L7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <p class="dropzone-text">Drag & drop subtitle file here</p>
              <p class="dropzone-subtext">or click to browse</p>
              <span class="dropzone-formats">.srt .vtt .sub .ass</span>
            </div>
          </div>
          
          <div class="file-loaded" id="fileLoaded">
            <svg class="file-icon" viewBox="0 0 24 24" fill="none">
              <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            </svg>
            <div class="file-info">
              <span class="file-name" id="fileName">No file loaded</span>
              <span class="file-count" id="subtitleCount">0 subtitles</span>
            </div>
            <button class="file-clear" id="clearFile" title="Clear subtitle">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </section>

        <!-- Time Offset Section -->
        <section class="section offset-section">
          <div class="section-header">
            <h2 class="section-title">
              <svg class="section-icon" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Sync Timing
            </h2>
            <button class="reset-btn" id="resetOffset" title="Reset to 0">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C8.5 3 5.5 5 4 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M4 3V8H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Reset
            </button>
          </div>

          <div class="offset-display">
            <span class="offset-value" id="offsetValue">0.0</span>
            <span class="offset-unit">seconds</span>
          </div>

          <div class="offset-controls">
            <div class="offset-group offset-group--advance">
              <button class="offset-btn offset-btn--large offset-btn--advance" data-offset="-5" title="Subtitles appear 5s earlier">
                <span class="offset-btn-value">-5s</span>
              </button>
              <button class="offset-btn offset-btn--medium offset-btn--advance" data-offset="-1" title="Subtitles appear 1s earlier">
                <span class="offset-btn-value">-1s</span>
              </button>
              <button class="offset-btn offset-btn--small offset-btn--advance" data-offset="-0.5" title="Subtitles appear 0.5s earlier">
                <span class="offset-btn-value">-0.5</span>
              </button>
            </div>
            
            <div class="offset-divider"></div>
            
            <div class="offset-group offset-group--delay">
              <button class="offset-btn offset-btn--small offset-btn--delay" data-offset="0.5" title="Subtitles appear 0.5s later">
                <span class="offset-btn-value">+0.5</span>
              </button>
              <button class="offset-btn offset-btn--medium offset-btn--delay" data-offset="1" title="Subtitles appear 1s later">
                <span class="offset-btn-value">+1s</span>
              </button>
              <button class="offset-btn offset-btn--large offset-btn--delay" data-offset="5" title="Subtitles appear 5s later">
                <span class="offset-btn-value">+5s</span>
              </button>
            </div>
          </div>

          <p class="offset-hint" id="offsetHint">
            <span class="hint-neutral">Subtitles are in sync</span>
          </p>
        </section>

        <!-- Appearance Section -->
        <section class="section appearance-section">
          <div class="section-header">
            <h2 class="section-title">
              <svg class="section-icon" viewBox="0 0 24 24" fill="none">
                <path d="M12 3C7.03 3 3 7.03 3 12C3 16.97 7.03 21 12 21C12.83 21 13.5 20.33 13.5 19.5C13.5 19.11 13.35 18.76 13.11 18.49C12.88 18.23 12.73 17.88 12.73 17.5C12.73 16.67 13.4 16 14.23 16H16C18.76 16 21 13.76 21 11C21 6.58 16.97 3 12 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="6.5" cy="11.5" r="1.5" fill="currentColor"/>
                <circle cx="9.5" cy="7.5" r="1.5" fill="currentColor"/>
                <circle cx="14.5" cy="7.5" r="1.5" fill="currentColor"/>
                <circle cx="17.5" cy="11.5" r="1.5" fill="currentColor"/>
              </svg>
              Appearance
            </h2>
          </div>

          <!-- Font Size Control -->
          <div class="appearance-row">
            <label class="appearance-label">Font Size</label>
            <div class="size-controls">
              <button class="size-btn" id="fontSizeDecrease" title="Decrease font size">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </button>
              <span class="size-value" id="fontSizeValue">28px</span>
              <button class="size-btn" id="fontSizeIncrease" title="Increase font size">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- Font Color Control -->
          <div class="appearance-row">
            <label class="appearance-label">Font Color</label>
            <div class="color-controls">
              <div class="color-presets">
                <button class="color-preset active" data-color="#FFFFFF" title="White" style="background: #FFFFFF;"></button>
                <button class="color-preset" data-color="#FFFF00" title="Yellow" style="background: #FFFF00;"></button>
                <button class="color-preset" data-color="#00FF00" title="Green" style="background: #00FF00;"></button>
                <button class="color-preset" data-color="#00FFFF" title="Cyan" style="background: #00FFFF;"></button>
                <button class="color-preset" data-color="#FF69B4" title="Pink" style="background: #FF69B4;"></button>
              </div>
              <input type="color" id="customColor" class="color-picker" value="#FFFFFF" title="Custom color">
            </div>
          </div>

          <!-- Preview -->
          <div class="subtitle-preview" id="subtitlePreview">
            <span>Sample Subtitle Text</span>
          </div>
        </section>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <span class="footer-text">Works with Netflix â€¢ More platforms coming soon</span>
      </footer>
    </div>
    <script src="popup.js"></script>
  </body>
</html>
